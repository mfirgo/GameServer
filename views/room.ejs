<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room <%=id%></title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/appjs.js"></script>
    <script>
        window.addEventListener('load', function() {
            var socket = io();
            socket.join(toString(id))

            socket.on('chat message', function(data) {
                var msg = document.getElementById('messages');
                msg.innerHTML += data + "<br/>";
            });

            var btsend = document.getElementById('btsend');
            btsend.addEventListener('click', function() {
                var txtmessage = document.getElementById('txtmessage');
                console.log("Wartość: ", txtmessage.value);
                socket.to(toString(id)).emit('chat message', txtmessage.value);
            });
        
        });
    </script>
</head>
<body>
    Welcome to room <%=id%> <br>
    Number of users in this room: <%=users%>

    <div>
        <input type='text' id='txtmessage' />
        <button id='btsend'>Wyślij</button>
        <div id='messages'></div>
    </div>

</body>
</html>